<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Print All Keys</title>
    <link rel="stylesheet" href="base.css"/>
    <script>
        document.addEventListener('DOMContentLoaded', function () {

            printallkeys();

            window.addEventListener('storage', function (event) {
                printallkeys();
            });

            function printallkeys() {
                document.body.innerHTML = '';
                for (var i = 0, len = localStorage.length; i < len; i++) {
                    createElement('div',
                            document.body,
                            localStorage.key(i) + ': ' + localStorage.getItem(localStorage.key(i)),
                            'panel');
                }
            }

            function createElement(type, parent, innerHTML, className, attrs) {
                var element = document.createElement(type);
                if (typeof parent !== 'undefined') parent.appendChild(element);
                if (typeof innerHTML !== 'undefined') element.innerHTML = innerHTML;
                if (typeof className !== 'undefined') element.className = className;
                if (typeof attrs !== 'undefined') {
                    for (var prop in attrs) {
                        element.setAttribute(prop, attrs[prop]);
                    }
                }
                return element;
            }

        });
    </script>
</head>
<body>

</body>
</html>